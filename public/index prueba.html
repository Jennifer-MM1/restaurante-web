<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RestauranteWeb - Descubre Jalpan a través de la comida</title>
    <meta name="description" content="Descubre restaurantes, bares y cafeterías únicos que ofrece Jalpan de Serra. Explora menús, horarios y la rica gastronomía serrana.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/icons/favicon.ico">
    
    <!-- Estilos -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/responsive.css">
    
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Estilos coherentes del sistema -->
    <style>
        /* ===== VARIABLES DEL SISTEMA ===== */
        :root {
            /* Colores principales */
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #3b82f6;
            
            /* Colores neutros */
            --white: #ffffff;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            
            /* Colores de estado */
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            
            /* Colores de tipo */
            --restaurant: #f59e0b;
            --bar: #8b5cf6;
            --cafe: #06b6d4;
            
            /* Tipografía del sistema */
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            
            /* Espaciado consistente */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            --spacing-3xl: 4rem;
            
            /* Bordes */
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            
            /* Sombras */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            
            /* Transiciones */
            --transition: all 0.2s ease-in-out;
            --transition-slow: all 0.3s ease-in-out;
        }

        /* ===== BASE RESET ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            line-height: 1.6;
            color: var(--gray-800);
            background-color: var(--white);
        }

        /* ===== SELECTOR DE IDIOMA ===== */
        .language-selector {
            position: relative;
            display: inline-flex;
            align-items: center;
            margin-left: var(--spacing-md);
        }

        .language-button {
            background: var(--white);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            padding: var(--spacing-sm) var(--spacing-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--gray-700);
            transition: var(--transition);
        }

        .language-button:hover {
            background: var(--gray-50);
            border-color: var(--primary);
        }

        .language-flag {
            width: 18px;
            height: 12px;
            border-radius: 2px;
            display: inline-block;
        }

        .flag-es {
            background: linear-gradient(to bottom, #c60b1e 33%, #ffc400 33%, #ffc400 66%, #c60b1e 66%);
        }

        .flag-en {
            background: linear-gradient(to bottom, #012169 33%, #fff 33%, #fff 66%, #c8102e 66%);
            background-image: 
                linear-gradient(45deg, transparent 25%, #012169 25%, #012169 50%, transparent 50%, transparent 75%, #012169 75%),
                linear-gradient(-45deg, transparent 25%, #012169 25%, #012169 50%, transparent 50%, transparent 75%, #012169 75%);
            background-size: 6px 6px;
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--white);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            min-width: 120px;
            display: none;
            animation: fadeInDown 0.2s ease-out;
        }

        .language-dropdown.active {
            display: block;
        }

        .language-option {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            cursor: pointer;
            border-bottom: 1px solid var(--gray-100);
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .language-option:last-child {
            border-bottom: none;
        }

        .language-option:hover {
            background: var(--gray-50);
        }

        .language-option.active {
            background: var(--primary);
            color: var(--white);
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== WIDGET DE CLIMA Y HORA ===== */
        .weather-time-widget {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-xl);
            margin-top: var(--spacing-2xl);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
        }

        .weather-info, .time-info {
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
            background: rgba(255, 255, 255, 0.1);
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            backdrop-filter: blur(5px);
        }

        .weather-icon, .time-icon {
            font-size: 2.5rem;
            color: var(--warning);
            width: 60px;
            text-align: center;
        }

        .weather-details, .time-details {
            flex: 1;
        }

        .weather-temp {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: var(--spacing-xs);
        }

        .weather-desc {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: var(--spacing-xs);
            text-transform: capitalize;
        }

        .weather-location {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .current-time {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: var(--spacing-xs);
        }

        .current-date {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: var(--spacing-xs);
        }

        .timezone-info {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .loading-skeleton {
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-sm);
            height: 20px;
            width: 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { opacity: 0.3; }
            50% { opacity: 0.7; }
            100% { opacity: 0.3; }
        }

        /* ===== NOTIFICACIONES EN TIEMPO REAL ===== */
        .realtime-notifications {
            position: fixed;
            top: 90px;
            right: 20px;
            z-index: 1500;
            max-width: 350px;
        }

        .notification {
            background: var(--white);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
            box-shadow: var(--shadow-xl);
            border-left: 4px solid var(--success);
            animation: slideInRight 0.3s ease-out;
            opacity: 0.95;
        }

        .notification.update {
            border-left-color: var(--warning);
        }

        .notification strong {
            display: block;
            margin-bottom: var(--spacing-xs);
            color: var(--gray-900);
            font-size: 0.9rem;
            font-weight: 600;
        }

        .notification p {
            color: var(--gray-600);
            font-size: 0.85rem;
            margin: 0;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 0.95;
            }
        }

        /* ===== INDICADOR DE CONEXIÓN ===== */
        .connection-indicator {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-sm);
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 500;
            margin-right: var(--spacing-sm);
        }

        .connection-indicator.connected {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .connection-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
            animation: pulse 2s infinite;
        }

        .connection-indicator.connected .connection-dot {
            animation: none;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .weather-time-widget {
                grid-template-columns: 1fr;
                gap: var(--spacing-lg);
                padding: var(--spacing-lg);
            }
            
            .weather-info, .time-info {
                padding: var(--spacing-md);
            }
            
            .weather-icon, .time-icon {
                font-size: 2rem;
                width: 50px;
            }
            
            .weather-temp, .current-time {
                font-size: 1.5rem;
            }
            
            .language-selector {
                margin-left: var(--spacing-sm);
            }
            
            .language-button {
                padding: var(--spacing-xs) var(--spacing-sm);
                font-size: 0.8rem;
            }
        }

        /* ===== RESTO DE ESTILOS ORIGINALES ===== */
        /* Mantener todos los estilos originales del documento... */
        
        /* ===== ANIMACIONES PARA ELEMENTOS NUEVOS ===== */
        .restaurant-card.new-item {
            animation: newItemAppear 0.6s ease-out;
            border: 2px solid var(--success);
        }

        .restaurant-card.updated-item {
            animation: updatedItemPulse 0.8s ease-out;
            border: 2px solid var(--warning);
        }

        @keyframes newItemAppear {
            0% {
                transform: translateY(20px) scale(0.95);
                opacity: 0;
            }
            100% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        @keyframes updatedItemPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        /* ===== ESTADÍSTICAS CON ANIMACIÓN ===== */
        .stat-number {
            transition: var(--transition-slow);
        }

        .stat-number.updating {
            color: var(--primary);
            transform: scale(1.1);
        }

        /* ===== GALERÍA SIMPLE ===== */
        .card-image {
            position: relative;
            width: 100%;
            height: 200px;
            overflow: hidden;
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            background: var(--gray-100);
        }
        
        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-slow);
        }
        
        .card-image:hover img {
            transform: scale(1.05);
        }
        
        .card-image-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 3rem;
        }
        
        .card-image-count {
            position: absolute;
            top: var(--spacing-sm);
            right: var(--spacing-sm);
            background: rgba(0, 0, 0, 0.7);
            color: var(--white);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-xl);
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* Resto de estilos originales mantener igual... */
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <div class="nav-container">
                <div class="nav-brand">
                    <h1 class="logo">
                        <i class="fas fa-utensils"></i>
                        <span data-translate="site-title">RestauranteWeb</span>
                    </h1>
                </div>
                
                <div class="nav-menu" id="nav-menu">
                    <a href="#inicio" class="nav-link active" data-translate="nav-home">Inicio</a>
                    <a href="#sobre-jalpan" class="nav-link" data-translate="nav-about">Jalpan de Serra</a>
                    <a href="#restaurantes" class="nav-link" data-translate="nav-restaurants">Restaurantes</a>
                    <a href="#bares" class="nav-link" data-translate="nav-bars">Bares</a>
                    <a href="#cafeterias" class="nav-link" data-translate="nav-cafes">Cafeterías</a>
                    <a href="Contactos.html" class="nav-link" data-translate="nav-contact">Contacto</a>
                </div>
                
                <div class="nav-actions">
                    <a href="admin.html" class="btn btn-admin">
                        <i class="fas fa-user-shield"></i>
                        <span data-translate="admin-panel">Panel Admin</span>
                    </a>
                    
                    <!-- Selector de idioma -->
                    <div class="language-selector">
                        <button class="language-button" id="language-button">
                            <span class="language-flag flag-es" id="current-flag"></span>
                            <span id="current-language">ES</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="language-dropdown" id="language-dropdown">
                            <div class="language-option" data-lang="es">
                                <span class="language-flag flag-es"></span>
                                <span>Español</span>
                            </div>
                            <div class="language-option" data-lang="en">
                                <span class="language-flag flag-en"></span>
                                <span>English</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Indicador de conexión WebSocket -->
                    <div class="connection-indicator" id="connection-indicator">
                        <div class="connection-dot"></div>
                        <span id="connection-status" data-translate="connecting">Conectando...</span>
                    </div>
                    <button class="nav-toggle" id="nav-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Hero Section -->
        <section id="inicio" class="hero">
            <div class="hero-container">
                <div class="hero-content">
                    <h1 class="hero-title">
                        <span data-translate="hero-title-part1">Descubre Jalpan a</span><span class="highlight" data-translate="hero-title-part2"> través de la comida</span>
                    </h1>
                    <p class="hero-subtitle" data-translate="hero-subtitle">
                        Descubre restaurantes, bares y cafeterías únicos que ofrece Jalpan de Serra. 
                        Explora menús, horarios y la rica gastronomía serrana.
                    </p>
                    <div class="hero-search">
                        <div class="search-box">
                            <input 
                                type="text" 
                                id="search-input" 
                                data-translate-placeholder="search-placeholder"
                                placeholder="Buscar restaurantes, bares o cafeterías..."
                                class="search-input"
                            >
                            <button class="search-btn" id="search-btn">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Widget de Clima y Hora -->
                    <div class="weather-time-widget">
                        <div class="weather-info">
                            <div class="weather-icon">
                                <i class="fas fa-sun" id="weather-icon"></i>
                            </div>
                            <div class="weather-details">
                                <div class="weather-temp" id="weather-temp">
                                    <div class="loading-skeleton" style="width: 60px; height: 24px;"></div>
                                </div>
                                <div class="weather-desc" id="weather-desc">
                                    <div class="loading-skeleton" style="width: 100px; height: 16px;"></div>
                                </div>
                                <div class="weather-location">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span data-translate="jalpan-location">Jalpan de Serra, QRO</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="time-info">
                            <div class="time-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="time-details">
                                <div class="current-time" id="current-time">--:--</div>
                                <div class="current-date" id="current-date">
                                    <div class="loading-skeleton" style="width: 120px; height: 16px;"></div>
                                </div>
                                <div class="timezone-info">
                                    <i class="fas fa-globe"></i>
                                    <span data-translate="timezone">Hora local México</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Nueva Sección: Sobre Jalpan de Serra -->
        <section id="sobre-jalpan" class="section section-alt">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title" data-translate="discover-jalpan">Descubre Jalpan de Serra</h2>
                    <p class="section-subtitle" data-translate="jalpan-description">
                        Un pueblo mágico en la Sierra Gorda queretana con una gastronomía única que combina 
                        tradiciones serranas, sabores ancestrales y la hospitalidad característica de la región
                    </p>
                </div>
                
                <div class="jalpan-features">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-mountain"></i>
                        </div>
                        <h3 class="feature-title" data-translate="mountain-cuisine">Gastronomía Serrana</h3>
                        <p class="feature-description" data-translate="mountain-cuisine-desc">
                            La cocina de Jalpan se caracteriza por sus sabores únicos de la sierra, 
                            con ingredientes frescos de la región y técnicas culinarias tradicionales.
                        </p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h3 class="feature-title" data-translate="local-ingredients">Ingredientes Locales</h3>
                        <p class="feature-description" data-translate="local-ingredients-desc">
                            Productos de la Sierra Gorda como quelites, hongos silvestres, miel de abeja, 
                            trucha y una gran variedad de hierbas aromáticas de la región.
                        </p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-church"></i>
                        </div>
                        <h3 class="feature-title" data-translate="franciscan-tradition">Tradición Franciscana</h3>
                        <p class="feature-description" data-translate="franciscan-tradition-desc">
                            La herencia de las misiones franciscanas se refleja en platillos tradicionales 
                            que han pasado de generación en generación por más de 250 años.
                        </p>
                    </div>
                </div>

                <div class="cta-banner">
                    <div class="cta-content">
                        <h3 class="cta-title" data-translate="learn-more-cta">¿Quieres conocer más sobre nuestra gastronomía serrana?</h3>
                        <p class="cta-text" data-translate="learn-more-desc">
                            Explora la historia, tradiciones y lugares gastronómicos más emblemáticos de Jalpan de Serra
                        </p>
                        <a href="jalpan-de-serra.html" class="btn btn-light">
                            <i class="fas fa-book-open"></i>
                            <span data-translate="learn-more-btn">Conocer más sobre Jalpan</span>
                        </a>
                    </div>
                    <div class="cta-visual">
                        <div class="visual-placeholder">
                            <i class="fas fa-utensils"></i>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Nueva Sección: Estadísticas de la Ciudad -->
        <section class="stats-section">
            <div class="container">
                <h2 class="section-title text-white" data-translate="jalpan-numbers">Jalpan de Serra en números</h2>
                <div class="city-stats">
                    <div class="city-stat">
                        <div class="stat-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="stat-content">
                            <span class="stat-number">25+</span>
                            <span class="stat-label" data-translate="local-restaurants">Restaurantes Locales</span>
                        </div>
                    </div>

                    <div class="city-stat">
                        <div class="stat-icon">
                            <i class="fas fa-award"></i>
                        </div>
                        <div class="stat-content">
                            <span class="stat-number" data-translate="magical-town">Pueblo</span>
                            <span class="stat-label" data-translate="magical-town-desc">Mágico de México</span>
                        </div>
                    </div>

                    <div class="city-stat">
                        <div class="stat-icon">
                            <i class="fas fa-tree"></i>
                        </div>
                        <div class="stat-content">
                            <span class="stat-number">UNESCO</span>
                            <span class="stat-label" data-translate="sierra-gorda">Sierra Gorda</span>
                        </div>
                    </div>

                    <div class="city-stat">
                        <div class="stat-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="stat-content">
                            <span class="stat-number">250+</span>
                            <span class="stat-label" data-translate="years-tradition">Años de Tradición</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filters Section -->
        <section class="filters">
            <div class="container">
                <div class="filter-tabs">
                    <button class="filter-tab active" data-type="todos">
                        <i class="fas fa-th-large"></i>
                        <span data-translate="filter-all">Todos</span>
                    </button>
                    <button class="filter-tab" data-type="restaurante">
                        <i class="fas fa-utensils"></i>
                        <span data-translate="filter-restaurants">Restaurantes</span>
                    </button>
                    <button class="filter-tab" data-type="bar">
                        <i class="fas fa-cocktail"></i>
                        <span data-translate="filter-bars">Bares</span>
                    </button>
                    <button class="filter-tab" data-type="cafeteria">
                        <i class="fas fa-coffee"></i>
                        <span data-translate="filter-cafes">Cafeterías</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="restaurantes" class="results">
            <div class="container">
                <div class="results-header">
                    <h2 class="results-title" data-translate="available-establishments">Establecimientos Disponibles</h2>
                    <div class="results-info">
                        <span id="results-count" data-translate="loading">Cargando...</span>
                    </div>
                </div>
                
                <!-- Loading -->
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p data-translate="loading-establishments">Cargando establecimientos...</p>
                </div>
                
                <!-- Results Grid -->
                <div class="results-grid" id="results-grid">
                    <!-- Los resultados se cargarán dinámicamente aquí -->
                </div>
                
                <!-- Empty State -->
                <div class="empty-state" id="empty-state" style="display: none;">
                    <div class="empty-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3 data-translate="no-results">No se encontraron resultados</h3>
                    <p data-translate="try-different-search">Intenta con otros términos de búsqueda o filtros</p>
                </div>
                
                <!-- Pagination -->
                <div class="pagination" id="pagination" style="display: none;">
                    <button class="btn btn-outline" id="prev-btn">
                        <i class="fas fa-chevron-left"></i>
                        <span data-translate="previous">Anterior</span>
                    </button>
                    <span class="pagination-info" id="pagination-info">
                        <span data-translate="page">Página</span> 1 <span data-translate="of">de</span> 1
                    </span>
                    <button class="btn btn-outline" id="next-btn">
                        <span data-translate="next">Siguiente</span>
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 class="footer-title">
                        <i class="fas fa-utensils"></i>
                        <span data-translate="site-title">RestauranteWeb</span>
                    </h3>
                    <p class="footer-text" data-translate="footer-description">
                        La plataforma que conecta a las personas con los mejores 
                        restaurantes, bares y cafeterías de Jalpan de Serra.
                    </p>
                    <div class="footer-social">
                        <a href="#" class="social-link" aria-label="Facebook">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-subtitle" data-translate="navigation">Navegación</h4>
                    <ul class="footer-links">
                        <li><a href="#inicio" data-translate="nav-home">Inicio</a></li>
                        <li><a href="#restaurantes" data-translate="nav-establishments">Establecimientos</a></li>
                        <li><a href="jalpan-de-serra.html" data-translate="nav-about-jalpan">Sobre Jalpan</a></li>
                        <li><a href="admin.html" data-translate="admin-panel">Panel Admin</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4 class="footer-subtitle" data-translate="mountain-gastronomy">Gastronomía Serrana</h4>
                    <ul class="footer-links">
                        <li><a href="jalpan-de-serra.html#platillos" data-translate="traditional-dishes">Platillos Tradicionales</a></li>
                        <li><a href="jalpan-de-serra.html#ingredientes" data-translate="local-ingredients">Ingredientes Locales</a></li>
                        <li><a href="jalpan-de-serra.html#historia" data-translate="culinary-history">Historia Culinaria</a></li>
                        <li><a href="jalpan-de-serra.html#tradiciones" data-translate="traditions">Tradiciones</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-subtitle" data-translate="contact">Contacto</h4>
                    <div class="footer-contact">
                        <p>
                            <i class="fas fa-envelope"></i>
                            info@restauranteweb.com
                        </p>
                        <p>
                            <i class="fas fa-phone"></i>
                            +52 (444) 123-4567
                        </p>
                        <p>
                            <i class="fas fa-map-marker-alt"></i>
                            <span data-translate="jalpan-location-full">Jalpan de Serra, Querétaro</span>
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 <span data-translate="site-title">RestauranteWeb</span> - <span data-translate="jalpan-location-full">Jalpan de Serra</span>. <span data-translate="all-rights">Todos los derechos reservados</span>.</p>
                <div class="footer-bottom-links">
                    <a href="#" data-translate="terms">Términos de Servicio</a>
                    <a href="#" data-translate="privacy">Política de Privacidad</a>
                    <a href="#" data-translate="help">Ayuda</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal para detalles de restaurante -->
    <div class="modal" id="restaurant-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title" data-translate="restaurant-details">Detalles del Restaurante</h3>
                <button class="modal-close" id="modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Contenido dinámico -->
            </div>
        </div>
    </div>

    <!-- Modal de imagen (Lightbox) -->
    <div class="image-lightbox" id="image-lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" id="lightbox-close">
                <i class="fas fa-times"></i>
            </button>
            <button class="lightbox-nav prev" id="lightbox-prev" style="display: none;">
                <i class="fas fa-chevron-left"></i>
            </button>
            <img class="lightbox-image" id="lightbox-image" alt="">
            <button class="lightbox-nav next" id="lightbox-next" style="display: none;">
                <i class="fas fa-chevron-right"></i>
            </button>
            <div class="lightbox-counter" id="lightbox-counter" style="display: none;">
                1 / 1
            </div>
            <div class="lightbox-title" id="lightbox-title"></div>
        </div>
    </div>

    <!-- Notificaciones en tiempo real -->
    <div class="realtime-notifications" id="realtime-notifications"></div>

    <!-- Scripts -->
    <script src="/js/utils.js"></script>
    <script>
        // ===== SISTEMA DE TRADUCCIÓN =====
        const translations = {
            es: {
                'site-title': 'RestauranteWeb',
                'nav-home': 'Inicio',
                'nav-about': 'Jalpan de Serra',
                'nav-restaurants': 'Restaurantes',
                'nav-bars': 'Bares',
                'nav-cafes': 'Cafeterías',
                'nav-contact': 'Contacto',
                'admin-panel': 'Panel Admin',
                'connecting': 'Conectando...',
                'hero-title-part1': 'Descubre Jalpan a',
                'hero-title-part2': ' través de la comida',
                'hero-subtitle': 'Descubre restaurantes, bares y cafeterías únicos que ofrece Jalpan de Serra. Explora menús, horarios y la rica gastronomía serrana.',
                'search-placeholder': 'Buscar restaurantes, bares o cafeterías...',
                'jalpan-location': 'Jalpan de Serra, QRO',
                'timezone': 'Hora local México',
                'discover-jalpan': 'Descubre Jalpan de Serra',
                'jalpan-description': 'Un pueblo mágico en la Sierra Gorda queretana con una gastronomía única que combina tradiciones serranas, sabores ancestrales y la hospitalidad característica de la región',
                'mountain-cuisine': 'Gastronomía Serrana',
                'mountain-cuisine-desc': 'La cocina de Jalpan se caracteriza por sus sabores únicos de la sierra, con ingredientes frescos de la región y técnicas culinarias tradicionales.',
                'local-ingredients': 'Ingredientes Locales',
                'local-ingredients-desc': 'Productos de la Sierra Gorda como quelites, hongos silvestres, miel de abeja, trucha y una gran variedad de hierbas aromáticas de la región.',
                'franciscan-tradition': 'Tradición Franciscana',
                'franciscan-tradition-desc': 'La herencia de las misiones franciscanas se refleja en platillos tradicionales que han pasado de generación en generación por más de 250 años.',
                'learn-more-cta': '¿Quieres conocer más sobre nuestra gastronomía serrana?',
                'learn-more-desc': 'Explora la historia, tradiciones y lugares gastronómicos más emblemáticos de Jalpan de Serra',
                'learn-more-btn': 'Conocer más sobre Jalpan',
                'jalpan-numbers': 'Jalpan de Serra en números',
                'local-restaurants': 'Restaurantes Locales',
                'magical-town': 'Pueblo',
                'magical-town-desc': 'Mágico de México',
                'sierra-gorda': 'Sierra Gorda',
                'years-tradition': 'Años de Tradición',
                'filter-all': 'Todos',
                'filter-restaurants': 'Restaurantes',
                'filter-bars': 'Bares',
                'filter-cafes': 'Cafeterías',
                'available-establishments': 'Establecimientos Disponibles',
                'loading': 'Cargando...',
                'loading-establishments': 'Cargando establecimientos...',
                'no-results': 'No se encontraron resultados',
                'try-different-search': 'Intenta con otros términos de búsqueda o filtros',
                'previous': 'Anterior',
                'next': 'Siguiente',
                'page': 'Página',
                'of': 'de',
                'footer-description': 'La plataforma que conecta a las personas con los mejores restaurantes, bares y cafeterías de Jalpan de Serra.',
                'navigation': 'Navegación',
                'nav-establishments': 'Establecimientos',
                'nav-about-jalpan': 'Sobre Jalpan',
                'mountain-gastronomy': 'Gastronomía Serrana',
                'traditional-dishes': 'Platillos Tradicionales',
                'culinary-history': 'Historia Culinaria',
                'traditions': 'Tradiciones',
                'contact': 'Contacto',
                'jalpan-location-full': 'Jalpan de Serra, Querétaro',
                'all-rights': 'Todos los derechos reservados',
                'terms': 'Términos de Servicio',
                'privacy': 'Política de Privacidad',
                'help': 'Ayuda',
                'restaurant-details': 'Detalles del Restaurante'
            },
            en: {
                'site-title': 'RestauranteWeb',
                'nav-home': 'Home',
                'nav-about': 'Jalpan de Serra',
                'nav-restaurants': 'Restaurants',
                'nav-bars': 'Bars',
                'nav-cafes': 'Cafés',
                'nav-contact': 'Contact',
                'admin-panel': 'Admin Panel',
                'connecting': 'Connecting...',
                'hero-title-part1': 'Discover Jalpan',
                'hero-title-part2': ' through food',
                'hero-subtitle': 'Discover unique restaurants, bars and cafés that Jalpan de Serra offers. Explore menus, schedules and the rich mountain gastronomy.',
                'search-placeholder': 'Search restaurants, bars or cafés...',
                'jalpan-location': 'Jalpan de Serra, QRO',
                'timezone': 'Mexico local time',
                'discover-jalpan': 'Discover Jalpan de Serra',
                'jalpan-description': 'A magical town in the Sierra Gorda of Querétaro with unique gastronomy that combines mountain traditions, ancestral flavors and the characteristic hospitality of the region',
                'mountain-cuisine': 'Mountain Cuisine',
                'mountain-cuisine-desc': 'Jalpan\'s cuisine is characterized by its unique mountain flavors, with fresh regional ingredients and traditional culinary techniques.',
                'local-ingredients': 'Local Ingredients',
                'local-ingredients-desc': 'Sierra Gorda products such as quelites, wild mushrooms, bee honey, trout and a great variety of aromatic herbs from the region.',
                'franciscan-tradition': 'Franciscan Tradition',
                'franciscan-tradition-desc': 'The heritage of the Franciscan missions is reflected in traditional dishes that have been passed down from generation to generation for more than 250 years.',
                'learn-more-cta': 'Want to learn more about our mountain gastronomy?',
                'learn-more-desc': 'Explore the history, traditions and most emblematic gastronomic places of Jalpan de Serra',
                'learn-more-btn': 'Learn more about Jalpan',
                'jalpan-numbers': 'Jalpan de Serra in numbers',
                'local-restaurants': 'Local Restaurants',
                'magical-town': 'Magical',
                'magical-town-desc': 'Town of Mexico',
                'sierra-gorda': 'Sierra Gorda',
                'years-tradition': 'Years of Tradition',
                'filter-all': 'All',
                'filter-restaurants': 'Restaurants',
                'filter-bars': 'Bars',
                'filter-cafes': 'Cafés',
                'available-establishments': 'Available Establishments',
                'loading': 'Loading...',
                'loading-establishments': 'Loading establishments...',
                'no-results': 'No results found',
                'try-different-search': 'Try with different search terms or filters',
                'previous': 'Previous',
                'next': 'Next',
                'page': 'Page',
                'of': 'of',
                'footer-description': 'The platform that connects people with the best restaurants, bars and cafés in Jalpan de Serra.',
                'navigation': 'Navigation',
                'nav-establishments': 'Establishments',
                'nav-about-jalpan': 'About Jalpan',
                'mountain-gastronomy': 'Mountain Gastronomy',
                'traditional-dishes': 'Traditional Dishes',
                'culinary-history': 'Culinary History',
                'traditions': 'Traditions',
                'contact': 'Contact',
                'jalpan-location-full': 'Jalpan de Serra, Querétaro',
                'all-rights': 'All rights reserved',
                'terms': 'Terms of Service',
                'privacy': 'Privacy Policy',
                'help': 'Help',
                'restaurant-details': 'Restaurant Details'
            }
        };

        let currentLanguage = localStorage.getItem('language') || 'es';

        // ===== CLASE PRINCIPAL DE LA APLICACIÓN =====
        class RestauranteWebApp {
            constructor() {
                this.ws = null;
                this.currentFilter = 'todos';
                this.currentPage = 1;
                this.searchTerm = '';
                this.establishments = [];
                this.isLoading = false;
                
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.setupLanguageSelector();
                this.setupWeatherTimeWidget();
                this.connectWebSocket();
                this.loadEstablishments();
                this.loadStats();
                this.translatePage();
            }

            // ===== SISTEMA DE IDIOMAS =====
            setupLanguageSelector() {
                const languageButton = document.getElementById('language-button');
                const languageDropdown = document.getElementById('language-dropdown');
                const currentFlag = document.getElementById('current-flag');
                const currentLanguageSpan = document.getElementById('current-language');

                // Configurar idioma inicial
                this.updateLanguageUI();

                // Toggle dropdown
                languageButton.addEventListener('click', (e) => {
                    e.stopPropagation();
                    languageDropdown.classList.toggle('active');
                });

                // Seleccionar idioma
                document.querySelectorAll('.language-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        const lang = option.dataset.lang;
                        if (lang !== currentLanguage) {
                            this.changeLanguage(lang);
                        }
                        languageDropdown.classList.remove('active');
                    });
                });

                // Cerrar dropdown al hacer click fuera
                document.addEventListener('click', () => {
                    languageDropdown.classList.remove('active');
                });
            }

            changeLanguage(lang) {
                currentLanguage = lang;
                localStorage.setItem('language', lang);
                document.documentElement.lang = lang;
                this.updateLanguageUI();
                this.translatePage();
                
                // Recargar datos con nuevo idioma
                this.loadEstablishments(false);
                this.loadWeatherData();
            }

            updateLanguageUI() {
                const currentFlag = document.getElementById('current-flag');
                const currentLanguageSpan = document.getElementById('current-language');
                
                currentFlag.className = `language-flag flag-${currentLanguage}`;
                currentLanguageSpan.textContent = currentLanguage.toUpperCase();
                
                // Actualizar opciones activas
                document.querySelectorAll('.language-option').forEach(option => {
                    option.classList.toggle('active', option.dataset.lang === currentLanguage);
                });
            }

            translatePage() {
                const elements = document.querySelectorAll('[data-translate]');
                elements.forEach(element => {
                    const key = element.dataset.translate;
                    if (translations[currentLanguage] && translations[currentLanguage][key]) {
                        element.textContent = translations[currentLanguage][key];
                    }
                });

                // Traducir placeholders
                const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
                placeholderElements.forEach(element => {
                    const key = element.dataset.translatePlaceholder;
                    if (translations[currentLanguage] && translations[currentLanguage][key]) {
                        element.placeholder = translations[currentLanguage][key];
                    }
                });
            }

            // ===== WIDGET DE CLIMA Y HORA =====
            setupWeatherTimeWidget() {
                this.updateTime();
                this.loadWeatherData();
                
                // Actualizar hora cada segundo
                setInterval(() => this.updateTime(), 1000);
                
                // Actualizar clima cada 10 minutos
                setInterval(() => this.loadWeatherData(), 600000);
            }

            updateTime() {
                const now = new Date();
                const timeOptions = {
                    timeZone: 'America/Mexico_City',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                };
                
                const dateOptions = {
                    timeZone: 'America/Mexico_City',
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                };

                const timeString = now.toLocaleTimeString(currentLanguage === 'es' ? 'es-MX' : 'en-US', timeOptions);
                const dateString = now.toLocaleDateString(currentLanguage === 'es' ? 'es-MX' : 'en-US', dateOptions);

                document.getElementById('current-time').textContent = timeString;
                document.getElementById('current-date').textContent = dateString;
            }

            async loadWeatherData() {
                try {
                    // Usando OpenWeatherMap API gratuita para Jalpan de Serra
                    // Coordenadas aproximadas de Jalpan: 21.2167, -99.4667
                    const API_KEY = 'demo_key'; // En producción usar clave real
                    const lat = 21.2167;
                    const lon = -99.4667;
                    
                    // Para demo, simular datos del clima
                    const weatherData = this.getSimulatedWeatherData();
                    this.updateWeatherUI(weatherData);
                    
                } catch (error) {
                    console.error('Error cargando datos del clima:', error);
                    this.updateWeatherUI(this.getSimulatedWeatherData());
                }
            }

            getSimulatedWeatherData() {
                const hour = new Date().getHours();
                const temp = Math.round(18 + Math.random() * 8); // Entre 18-26°C
                
                let icon, description;
                if (hour >= 6 && hour < 18) {
                    icon = Math.random() > 0.3 ? 'fas fa-sun' : 'fas fa-cloud-sun';
                    description = currentLanguage === 'es' 
                        ? (Math.random() > 0.3 ? 'Soleado' : 'Parcialmente nublado')
                        : (Math.random() > 0.3 ? 'Sunny' : 'Partly cloudy');
                } else {
                    icon = Math.random() > 0.5 ? 'fas fa-moon' : 'fas fa-cloud-moon';
                    description = currentLanguage === 'es' 
                        ? (Math.random() > 0.5 ? 'Despejado' : 'Nublado')
                        : (Math.random() > 0.5 ? 'Clear' : 'Cloudy');
                }

                return { temp, icon, description };
            }

            updateWeatherUI(data) {
                document.getElementById('weather-temp').textContent = `${data.temp}°C`;
                document.getElementById('weather-desc').textContent = data.description;
                document.getElementById('weather-icon').className = data.icon;
            }

            // ===== WEBSOCKET =====
            connectWebSocket() {
                const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
                const wsUrl = `${protocol}//${window.location.host}`;
                
                try {
                    this.ws = new WebSocket(wsUrl);
                    
                    this.ws.onopen = () => {
                        console.log('✅ WebSocket conectado');
                        this.updateConnectionStatus(true);
                        
                        // Suscribirse a actualizaciones
                        this.ws.send(JSON.stringify({ type: 'subscribe' }));
                    };

                    this.ws.onmessage = (event) => {
                        try {
                            const data = JSON.parse(event.data);
                            this.handleWebSocketMessage(data);
                        } catch (error) {
                            console.error('Error procesando mensaje WebSocket:', error);
                        }
                    };

                    this.ws.onclose = () => {
                        console.log('❌ WebSocket desconectado');
                        this.updateConnectionStatus(false);
                        
                        // Reconectar después de 3 segundos
                        setTimeout(() => this.connectWebSocket(), 3000);
                    };

                    this.ws.onerror = (error) => {
                        console.error('Error WebSocket:', error);
                        this.updateConnectionStatus(false);
                    };

                } catch (error) {
                    console.error('Error conectando WebSocket:', error);
                    this.updateConnectionStatus(false);
                }
            }

            handleWebSocketMessage(data) {
                switch (data.type) {
                    case 'new_restaurant':
                        this.handleNewEstablishment(data);
                        break;
                    case 'updated_restaurant':
                        this.handleUpdatedEstablishment(data);
                        break;
                    case 'stats_update':
                        this.updateStats(data.data);
                        break;
                    case 'connection':
                    case 'subscribed':
                        console.log('📡', data.message);
                        break;
                }
            }

            handleNewEstablishment(data) {
                const establishment = data.data;
                const message = currentLanguage === 'es' 
                    ? `🆕 Nuevo ${establishment.tipo}`
                    : `🆕 New ${establishment.tipo}`;
                const desc = currentLanguage === 'es'
                    ? `${establishment.nombre} en ${establishment.ciudad}`
                    : `${establishment.nombre} in ${establishment.ciudad}`;
                
                this.showNotification(message, desc, 'new');
                
                // Recargar si estamos en la primera página y no hay filtros específicos
                if (this.currentPage === 1 && (this.currentFilter === 'todos' || this.currentFilter === establishment.tipo)) {
                    this.loadEstablishments(false); // Sin mostrar loading
                }
                
                this.loadStats();
            }

            handleUpdatedEstablishment(data) {
                const establishment = data.data;
                const title = currentLanguage === 'es' 
                    ? '📝 Establecimiento actualizado'
                    : '📝 Establishment updated';
                const message = currentLanguage === 'es'
                    ? `${establishment.nombre} ha sido modificado`
                    : `${establishment.nombre} has been modified`;
                    
                this.showNotification(title, message, 'update');
                
                // Marcar el elemento como actualizado si está visible
                const card = document.querySelector(`[data-establishment-id="${establishment.id}"]`);
                if (card) {
                    card.classList.add('updated-item');
                    setTimeout(() => {
                        card.classList.remove('updated-item');
                    }, 2000);
                }
            }

            updateConnectionStatus(connected) {
                const indicator = document.getElementById('connection-indicator');
                const status = document.getElementById('connection-status');
                
                if (connected) {
                    indicator.classList.add('connected');
                    const connectedText = currentLanguage === 'es' ? 'En línea' : 'Online';
                    status.textContent = connectedText;
                } else {
                    indicator.classList.remove('connected');
                    const disconnectedText = currentLanguage === 'es' ? 'Desconectado' : 'Disconnected';
                    status.textContent = disconnectedText;
                }
            }

            showNotification(title, message, type = 'new') {
                const container = document.getElementById('realtime-notifications');
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <strong>${title}</strong>
                    <p>${message}</p>
                `;

                container.appendChild(notification);

                // Auto-remover después de 5 segundos
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 5000);

                // Limitar a máximo 3 notificaciones
                const notifications = container.children;
                if (notifications.length > 3) {
                    notifications[0].remove();
                }
            }

            // ===== EVENT LISTENERS =====
            setupEventListeners() {
                // Búsqueda
                const searchInput = document.getElementById('search-input');
                const searchBtn = document.getElementById('search-btn');
                
                searchInput.addEventListener('input', this.debounce(() => {
                    this.searchTerm = searchInput.value;
                    this.currentPage = 1;
                    this.loadEstablishments();
                }, 500));

                searchBtn.addEventListener('click', () => {
                    this.searchTerm = searchInput.value;
                    this.currentPage = 1;
                    this.loadEstablishments();
                });

                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.searchTerm = searchInput.value;
                        this.currentPage = 1;
                        this.loadEstablishments();
                    }
                });

                // Filtros de tipo
                document.querySelectorAll('.filter-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        // Remover clase active de todos
                        document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                        
                        // Agregar clase active al clickeado
                        tab.classList.add('active');
                        
                        // Actualizar filtro
                        this.currentFilter = tab.dataset.type;
                        this.currentPage = 1;
                        this.loadEstablishments();
                    });
                });

                // Paginación
                document.getElementById('prev-btn').addEventListener('click', () => {
                    if (this.currentPage > 1) {
                        this.currentPage--;
                        this.loadEstablishments();
                        this.scrollToResults();
                    }
                });

                document.getElementById('next-btn').addEventListener('click', () => {
                    this.currentPage++;
                    this.loadEstablishments();
                    this.scrollToResults();
                });

                // Modal
                document.getElementById('modal-close').addEventListener('click', () => {
                    this.closeModal();
                });

                document.getElementById('restaurant-modal').addEventListener('click', (e) => {
                    if (e.target === e.currentTarget) {
                        this.closeModal();
                    }
                });

                // Lightbox
                document.getElementById('lightbox-close').addEventListener('click', () => {
                    this.closeLightbox();
                });

                document.getElementById('image-lightbox').addEventListener('click', (e) => {
                    if (e.target === e.currentTarget) {
                        this.closeLightbox();
                    }
                });

                document.getElementById('lightbox-prev').addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.lightboxPrev();
                });

                document.getElementById('lightbox-next').addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.lightboxNext();
                });

                // Keyboard navigation para lightbox
                document.addEventListener('keydown', (e) => {
                    if (!document.getElementById('image-lightbox').classList.contains('active')) return;
                    
                    switch(e.key) {
                        case 'Escape':
                            this.closeLightbox();
                            break;
                        case 'ArrowLeft':
                            this.lightboxPrev();
                            break;
                        case 'ArrowRight':
                            this.lightboxNext();
                            break;
                    }
                });

                // Keep-alive WebSocket
                setInterval(() => {
                    if (this.ws && this.ws.readyState === WebSocket.OPEN) {
                        this.ws.send(JSON.stringify({ type: 'ping' }));
                    }
                }, 30000);
            }

            scrollToResults() {
                document.getElementById('restaurantes').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }

            // ===== RESTO DE MÉTODOS ORIGINALES (sin cambios significativos) =====
            async loadEstablishments(showLoading = true) {
                // Mantener lógica original...
                if (this.isLoading) return;
                this.isLoading = true;

                if (showLoading) {
                    document.getElementById('loading').style.display = 'block';
                    document.getElementById('results-grid').style.display = 'none';
                    document.getElementById('empty-state').style.display = 'none';
                    document.getElementById('pagination').style.display = 'none';
                }

                try {
                    const params = new URLSearchParams({
                        pagina: this.currentPage,
                        limite: 12,
                        ...(this.currentFilter !== 'todos' && { tipo: this.currentFilter }),
                        ...(this.searchTerm && { buscar: this.searchTerm }),
                        ordenar: 'fechaCreacion',
                        direccion: 'desc'
                    });

                    const response = await fetch(`/api/restaurants?${params}`);
                    const data = await response.json();

                    if (data.success) {
                        this.establishments = data.data.restaurantes;
                        this.renderEstablishments();
                        this.updatePagination(data.data.pagination);
                        this.updateResultsInfo(data.data.pagination);
                        
                        if (data.data.estadisticas) {
                            this.updateStats(data.data.estadisticas);
                        }
                    } else {
                        throw new Error(data.message);
                    }
                } catch (error) {
                    console.error('Error cargando establecimientos:', error);
                    this.showEmptyState();
                } finally {
                    document.getElementById('loading').style.display = 'none';
                    this.isLoading = false;
                }
            }

            async loadStats() {
                try {
                    const response = await fetch('/api/restaurants/stats');
                    const data = await response.json();

                    if (data.success) {
                        this.updateStats(data.data.general);
                    }
                } catch (error) {
                    console.error('Error cargando estadísticas:', error);
                }
            }

            // ===== RENDERIZADO =====
            renderEstablishments() {
                const grid = document.getElementById('results-grid');
                
                if (this.establishments.length === 0) {
                    this.showEmptyState();
                    return;
                }

                grid.innerHTML = this.establishments.map(establishment => 
                    this.createEstablishmentCard(establishment)
                ).join('');

                grid.style.display = 'grid';
                document.getElementById('empty-state').style.display = 'none';

                // Agregar event listeners a las cards completas
                grid.querySelectorAll('.restaurant-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const id = card.dataset.establishmentId;
                        this.showEstablishmentDetails(id);
                    });
                });
            }

            createEstablishmentCard(establishment) {
                const typeIcon = this.getTypeIcon(establishment.tipo);
                const fechaCreacion = new Date(establishment.fechaCreacion).toLocaleDateString(currentLanguage === 'es' ? 'es-ES' : 'en-US');
                
                // Manejar imágenes reales del servidor
                let images = [];
                let imageCount = 0;
                let mainImageUrl = null;
                
                if (establishment.imagenes && establishment.imagenes.length > 0) {
                    images = establishment.imagenes.map(img => img.url);
                    imageCount = establishment.imagenes.length;
                    mainImageUrl = establishment.imagenes[0].url;
                } else {
                    images = this.getDemoImages(establishment.tipo);
                    imageCount = images.length;
                    mainImageUrl = images[0];
                }

                const registeredText = currentLanguage === 'es' ? 'Registrado:' : 'Registered:';
                
                return `
                    <div class="restaurant-card" data-establishment-id="${establishment.id}">
                        <div class="card-image">
                            ${mainImageUrl ? 
                                `<img src="${mainImageUrl}" alt="${establishment.nombre}" loading="lazy" 
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                 <div class="card-image-placeholder" style="display: none;">
                                     <i class="${typeIcon}"></i>
                                 </div>
                                 ${imageCount > 1 ? `<div class="card-image-count"><i class="fas fa-images"></i> ${imageCount}</div>` : ''}` :
                                `<div class="card-image-placeholder">
                                    <i class="${typeIcon}"></i>
                                 </div>`
                            }
                        </div>
                        <div class="card-content">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">${establishment.nombre}</h3>
                                    <span class="card-type ${establishment.tipo}">
                                        <i class="${typeIcon}"></i>
                                        ${establishment.tipo.charAt(0).toUpperCase() + establishment.tipo.slice(1)}
                                    </span>
                                </div>
                            </div>
                            <p class="card-description">${establishment.descripcion}</p>
                            <div class="card-info">
                                <div class="info-item">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>${establishment.direccion?.ciudad || (currentLanguage === 'es' ? 'Ciudad no especificada' : 'City not specified')}</span>
                                </div>
                                <div class="info-item">
                                    <i class="fas fa-phone"></i>
                                    <span>${establishment.telefono}</span>
                                </div>
                                <div class="info-item">
                                    <i class="fas fa-envelope"></i>
                                    <span>${establishment.email}</span>
                                </div>
                                <div class="info-item">
                                    <i class="fas fa-calendar-alt"></i>
                                    <span>${registeredText} ${fechaCreacion}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            getDemoImages(tipo) {
                // Imágenes de demostración
                const images = {
                    restaurante: [
                        'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop',
                        'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop',
                        'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400&h=300&fit=crop'
                    ],
                    bar: [
                        'https://images.unsplash.com/photo-1569949381669-ecf31ae8e613?w=400&h=300&fit=crop',
                        'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=400&h=300&fit=crop',
                        'https://images.unsplash.com/photo-1572116469696-31de0f17cc34?w=400&h=300&fit=crop'
                    ],
                    cafeteria: [
                        'https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=400&h=300&fit=crop',
                        'https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=400&h=300&fit=crop',
                        'https://images.unsplash.com/photo-1559925393-8be0ec4767c8?w=400&h=300&fit=crop'
                    ]
                };
                
                return images[tipo] || images.restaurante;
            }

            getTypeIcon(tipo) {
                const icons = {
                    'restaurante': 'fas fa-utensils',
                    'bar': 'fas fa-cocktail',
                    'cafeteria': 'fas fa-coffee'
                };
                return icons[tipo] || 'fas fa-store';
            }

            showEmptyState() {
                document.getElementById('results-grid').style.display = 'none';
                document.getElementById('empty-state').style.display = 'block';
                document.getElementById('pagination').style.display = 'none';
            }

            updatePagination(pagination) {
                const paginationElement = document.getElementById('pagination');
                const prevBtn = document.getElementById('prev-btn');
                const nextBtn = document.getElementById('next-btn');
                const paginationInfo = document.getElementById('pagination-info');

                if (pagination.totalPaginas <= 1) {
                    paginationElement.style.display = 'none';
                    return;
                }

                paginationElement.style.display = 'flex';
                
                const pageText = currentLanguage === 'es' ? 'Página' : 'Page';
                const ofText = currentLanguage === 'es' ? 'de' : 'of';
                paginationInfo.innerHTML = `<span>${pageText}</span> ${pagination.pagina} <span>${ofText}</span> ${pagination.totalPaginas}`;
                
                prevBtn.disabled = !pagination.hasPrev;
                nextBtn.disabled = !pagination.hasNext;
                
                if (pagination.hasPrev) {
                    prevBtn.classList.remove('disabled');
                } else {
                    prevBtn.classList.add('disabled');
                }
                
                if (pagination.hasNext) {
                    nextBtn.classList.remove('disabled');
                } else {
                    nextBtn.classList.add('disabled');
                }
            }

            updateResultsInfo(pagination) {
                const resultsCount = document.getElementById('results-count');
                const total = pagination.total;
                const start = (pagination.pagina - 1) * pagination.limite + 1;
                const end = Math.min(pagination.pagina * pagination.limite, total);
                
                if (total === 0) {
                    resultsCount.textContent = currentLanguage === 'es' ? 'No hay resultados' : 'No results';
                } else if (total === 1) {
                    resultsCount.textContent = currentLanguage === 'es' 
                        ? '1 establecimiento encontrado' 
                        : '1 establishment found';
                } else {
                    const showingText = currentLanguage === 'es' ? 'Mostrando' : 'Showing';
                    const ofText = currentLanguage === 'es' ? 'de' : 'of';
                    const establishmentsText = currentLanguage === 'es' ? 'establecimientos' : 'establishments';
                    resultsCount.textContent = `${showingText} ${start}-${end} ${ofText} ${total} ${establishmentsText}`;
                }
            }

            updateStats(stats) {
                // Mantener lógica original pero sin mostrar estadísticas en hero
                // Solo actualizar las estadísticas de la sección inferior si existe
            }

            // ===== MODAL Y LIGHTBOX (mantener métodos originales) =====
            async showEstablishmentDetails(id) {
                try {
                    const response = await fetch(`/api/restaurants/${id}`);
                    const data = await response.json();

                    if (data.success) {
                        this.renderModal(data.data.restaurant);
                        this.openModal();
                    } else {
                        throw new Error(data.message);
                    }
                } catch (error) {
                    console.error('Error cargando detalles:', error);
                    const errorMsg = currentLanguage === 'es' 
                        ? 'Error al cargar los detalles del establecimiento'
                        : 'Error loading establishment details';
                    alert(errorMsg);
                }
            }

            // Resto de métodos (renderModal, lightbox, etc.) mantener originales...
            renderModal(establishment) {
                // Implementación original con traducciones donde sea necesario
                const modalTitle = document.getElementById('modal-title');
                const modalBody = document.getElementById('modal-body');

                modalTitle.textContent = establishment.nombre;

                let images = [];
                
                if (establishment.imagenes && establishment.imagenes.length > 0) {
                    images = establishment.imagenes.map(img => img.url);
                } else {
                    images = this.getDemoImages(establishment.tipo);
                }

                modalBody.innerHTML = `
                    <div class="restaurant-details">
                        ${this.renderSimpleGallery(images, establishment.nombre)}
                        
                        <div class="detail-header">
                            <h2>${establishment.nombre}</h2>
                            <span class="card-type ${establishment.tipo}">
                                <i class="${this.getTypeIcon(establishment.tipo)}"></i>
                                ${establishment.tipo.charAt(0).toUpperCase() + establishment.tipo.slice(1)}
                            </span>
                        </div>

                        <div class="detail-section">
                            <h4><i class="fas fa-info-circle"></i> ${currentLanguage === 'es' ? 'Descripción' : 'Description'}</h4>
                            <p>${establishment.descripcion}</p>
                        </div>

                        <div class="detail-section">
                            <h4><i class="fas fa-map-marker-alt"></i> ${currentLanguage === 'es' ? 'Ubicación' : 'Location'}</h4>
                            <p>${establishment.direccion?.calle || (currentLanguage === 'es' ? 'Calle no especificada' : 'Street not specified')}, ${establishment.direccion?.ciudad || (currentLanguage === 'es' ? 'Ciudad no especificada' : 'City not specified')}, CP: ${establishment.direccion?.codigoPostal || 'N/A'}</p>
                        </div>

                        <div class="detail-section">
                            <h4><i class="fas fa-phone"></i> ${currentLanguage === 'es' ? 'Contacto' : 'Contact'}</h4>
                            <p>${currentLanguage === 'es' ? 'Teléfono' : 'Phone'}: ${establishment.telefono}</p>
                            <p>Email: ${establishment.email}</p>
                        </div>

                        ${establishment.horarios ? this.renderHorarios(establishment.horarios) : ''}
                        ${establishment.menu && establishment.menu.length > 0 ? this.renderMenu(establishment.menu) : ''}
                        ${establishment.redes ? this.renderRedesSociales(establishment.redes) : ''}
                        
                        <div class="detail-section">
                            <h4><i class="fas fa-user"></i> ${currentLanguage === 'es' ? 'Administrador' : 'Administrator'}</h4>
                            <p>${establishment.admin ? `${establishment.admin.nombre} ${establishment.admin.apellido}` : (currentLanguage === 'es' ? 'No disponible' : 'Not available')}</p>
                        </div>
                    </div>
                `;

                if (images && images.length > 1) {
                    this.initSimpleGallery(images);
                }

                this.initGalleryLightbox();
            }

            // Resto de métodos mantener igual...
            renderSimpleGallery(images, altText) {
                if (!images || images.length === 0) {
                    return `
                        <div class="simple-gallery">
                            <div class="gallery-main-simple">
                                <div class="card-image-placeholder">
                                    <i class="fas fa-image"></i>
                                </div>
                            </div>
                        </div>
                    `;
                }

                const mainImage = images[0];
                const thumbnails = images.length > 1 ? images.map((imgUrl, index) => 
                    `<div class="gallery-thumbnail-simple ${index === 0 ? 'active' : ''}" data-index="${index}">
                        <img src="${imgUrl}" alt="${altText} - ${currentLanguage === 'es' ? 'Imagen' : 'Image'} ${index + 1}" loading="lazy" 
                             class="clickable-image" data-lightbox-gallery data-image-index="${index}"
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yMCAyMEMxOC44OTU0IDIwIDE4IDE5LjEwNDYgMTggMThDMTggMTYuODk1NCAxOC44OTU0IDE2IDIwIDE2QzIxLjEwNDYgMTYgMjIgMTYuODk1NCAyMiAxOEMyMiAxOS4xMDQ2IDIxLjEwNDYgMjAgMjAgMjBaIiBmaWxsPSIjOUM5Qzk3Ii8+CjxwYXRoIGQ9Ik0yNCAyNEgyNFYyNkgyNFYyNFoiIGZpbGw9IiM5QzlDOTciLz4KPC9zdmc+';">
                     </div>`
                ).join('') : '';

                return `
                    <div class="simple-gallery" data-gallery-images='${JSON.stringify(images)}' data-gallery-title="${altText}">
                        <div class="gallery-main-simple">
                            <img src="${mainImage}" alt="${altText}" id="simple-main-image" loading="lazy" 
                                 class="clickable-image" data-lightbox-main data-image-index="0"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="card-image-placeholder" style="display: none;">
                                <i class="fas fa-image"></i>
                            </div>
                            ${images.length > 1 ? `
                                <button class="gallery-nav-simple prev" id="simple-prev">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="gallery-nav-simple next" id="simple-next">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                                <div class="gallery-counter-simple">
                                    <span id="simple-current">1</span> / ${images.length}
                                </div>
                            ` : ''}
                        </div>
                        ${images.length > 1 ? `
                            <div class="gallery-thumbnails-simple">
                                ${thumbnails}
                            </div>
                        ` : ''}
                    </div>
                `;
            }

            initSimpleGallery(images) {
                let currentIndex = 0;
                const mainImage = document.getElementById('simple-main-image');
                const prevBtn = document.getElementById('simple-prev');
                const nextBtn = document.getElementById('simple-next');
                const counter = document.getElementById('simple-current');
                const thumbnails = document.querySelectorAll('.gallery-thumbnail-simple');

                if (!mainImage || !prevBtn || !nextBtn) return;

                const updateGallery = (index) => {
                    currentIndex = index;
                    mainImage.src = images[index];
                    if (counter) counter.textContent = index + 1;
                    
                    thumbnails.forEach((thumb, i) => {
                        thumb.classList.toggle('active', i === index);
                    });
                };

                prevBtn.addEventListener('click', () => {
                    const newIndex = currentIndex > 0 ? currentIndex - 1 : images.length - 1;
                    updateGallery(newIndex);
                });

                nextBtn.addEventListener('click', () => {
                    const newIndex = currentIndex < images.length - 1 ? currentIndex + 1 : 0;
                    updateGallery(newIndex);
                });

                thumbnails.forEach((thumb, index) => {
                    thumb.addEventListener('click', () => {
                        updateGallery(index);
                    });
                });
            }

            renderHorarios(horarios) {
                const dias = ['lunes', 'martes', 'miercoles', 'jueves', 'viernes', 'sabado', 'domingo'];
                const diasNombres = currentLanguage === 'es' 
                    ? ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo']
                    : ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                
                const scheduleTitle = currentLanguage === 'es' ? 'Horarios' : 'Schedule';
                const closedText = currentLanguage === 'es' ? 'Cerrado' : 'Closed';
                
                let horariosHtml = `<div class="detail-section"><h4><i class="fas fa-clock"></i> ${scheduleTitle}</h4><div class="horarios-list">`;
                
                dias.forEach((dia, index) => {
                    const horario = horarios[dia];
                    const horarioTexto = horario && horario.apertura && horario.cierre 
                        ? `${horario.apertura} - ${horario.cierre}`
                        : closedText;
                    
                    horariosHtml += `
                        <div class="horario-item">
                            <span class="dia">${diasNombres[index]}</span>
                            <span class="horario">${horarioTexto}</span>
                        </div>
                    `;
                });
                
                horariosHtml += '</div></div>';
                return horariosHtml;
            }

            renderMenu(menu) {
                const menuTitle = currentLanguage === 'es' ? 'Menú' : 'Menu';
                let menuHtml = `<div class="detail-section"><h4><i class="fas fa-utensils"></i> ${menuTitle}</h4>`;
                
                menu.forEach(categoria => {
                    menuHtml += `
                        <div class="menu-categoria">
                            <h5>${categoria.categoria}</h5>
                            <div class="menu-items">
                    `;
                    
                    categoria.items.forEach(item => {
                        menuHtml += `
                            <div class="menu-item">
                                <div class="item-info">
                                    <span class="item-nombre">${item.nombre}</span>
                                    ${item.descripcion ? `<span class="item-descripcion">${item.descripcion}</span>` : ''}
                                </div>
                                <span class="item-precio">${item.precio}</span>
                            </div>
                        `;
                    });
                    
                    menuHtml += '</div></div>';
                });
                
                menuHtml += '</div>';
                return menuHtml;
            }

            renderRedesSociales(redes) {
                const socialMediaTitle = currentLanguage === 'es' ? 'Redes Sociales' : 'Social Media';
                const websiteText = currentLanguage === 'es' ? 'Sitio Web' : 'Website';
                
                let redesHtml = `<div class="detail-section"><h4><i class="fas fa-share-alt"></i> ${socialMediaTitle}</h4><div class="redes-sociales">`;
                
                if (redes.facebook) {
                    redesHtml += `<a href="${redes.facebook}" target="_blank"><i class="fab fa-facebook"></i> Facebook</a>`;
                }
                if (redes.instagram) {
                    redesHtml += `<a href="${redes.instagram}" target="_blank"><i class="fab fa-instagram"></i> Instagram</a>`;
                }
                if (redes.twitter) {
                    redesHtml += `<a href="${redes.twitter}" target="_blank"><i class="fab fa-twitter"></i> Twitter</a>`;
                }
                if (redes.website) {
                    redesHtml += `<a href="${redes.website}" target="_blank"><i class="fas fa-globe"></i> ${websiteText}</a>`;
                }
                
                redesHtml += '</div></div>';
                return redesHtml;
            }

            openModal() {
                document.getElementById('restaurant-modal').classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            closeModal() {
                document.getElementById('restaurant-modal').classList.remove('active');
                document.body.style.overflow = '';
            }

            // Lightbox functionality
            openLightbox(images, currentIndex = 0, title = '') {
                const lightbox = document.getElementById('image-lightbox');
                const lightboxTitle = document.getElementById('lightbox-title');
                const lightboxCounter = document.getElementById('lightbox-counter');
                const lightboxPrev = document.getElementById('lightbox-prev');
                const lightboxNext = document.getElementById('lightbox-next');

                this.lightboxData = {
                    images: images,
                    currentIndex: currentIndex,
                    title: title
                };

                this.updateLightboxImage();

                if (images.length > 1) {
                    lightboxPrev.style.display = 'flex';
                    lightboxNext.style.display = 'flex';
                    lightboxCounter.style.display = 'block';
                } else {
                    lightboxPrev.style.display = 'none';
                    lightboxNext.style.display = 'none';
                    lightboxCounter.style.display = 'none';
                }

                lightboxTitle.textContent = title;
                lightbox.classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            updateLightboxImage() {
                const lightboxImage = document.getElementById('lightbox-image');
                const lightboxCounter = document.getElementById('lightbox-counter');
                
                if (!this.lightboxData) return;

                const { images, currentIndex, title } = this.lightboxData;
                
                lightboxImage.src = images[currentIndex];
                const imageText = currentLanguage === 'es' ? 'Imagen' : 'Image';
                lightboxImage.alt = `${title} - ${imageText} ${currentIndex + 1}`;
                
                if (images.length > 1) {
                    lightboxCounter.textContent = `${currentIndex + 1} / ${images.length}`;
                }
            }

            closeLightbox() {
                const lightbox = document.getElementById('image-lightbox');
                lightbox.classList.remove('active');
                document.body.style.overflow = '';
                this.lightboxData = null;
            }

            lightboxPrev() {
                if (!this.lightboxData) return;
                
                const { images } = this.lightboxData;
                this.lightboxData.currentIndex = this.lightboxData.currentIndex > 0 
                    ? this.lightboxData.currentIndex - 1 
                    : images.length - 1;
                
                this.updateLightboxImage();
            }

            lightboxNext() {
                if (!this.lightboxData) return;
                
                const { images } = this.lightboxData;
                this.lightboxData.currentIndex = this.lightboxData.currentIndex < images.length - 1 
                    ? this.lightboxData.currentIndex + 1 
                    : 0;
                
                this.updateLightboxImage();
            }

            initGalleryLightbox() {
    const galleryContainer = document.querySelector('.simple-gallery');
    if (!galleryContainer) return;

    const images = JSON.parse(galleryContainer.dataset.galleryImages || '[]');
    const title = galleryContainer.dataset.galleryTitle || '';

    // Imagen principal clickeable
    const mainImage = galleryContainer.querySelector('[data-lightbox-main]');
    if (mainImage) {
        mainImage.addEventListener('click', (e) => {
            e.stopPropagation();
            const imageIndex = parseInt(mainImage.dataset.imageIndex);
            this.openLightbox(images, imageIndex, title);
        });
    }

    // Thumbnails clickeables
    const thumbnails = galleryContainer.querySelectorAll('[data-lightbox-gallery]');
    thumbnails.forEach(thumbnail => {
        thumbnail.addEventListener('click', (e) => {
            e.stopPropagation();
            const imageIndex = parseInt(thumbnail.dataset.imageIndex);
            this.openLightbox(images, imageIndex, title);
        });
    });
}}